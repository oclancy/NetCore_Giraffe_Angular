!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("@angular/http"),require("rxjs/operators"),require("@angular/router"),require("@angular/core")):"function"==typeof define&&define.amd?define("mycore",["exports","rxjs","@angular/http","rxjs/operators","@angular/router","@angular/core"],e):e(t.mycore={},t.rxjs,t.ng.http,t.rxjs.operators,t.ng.router,t.ng.core)}(this,function(t,r,e,o,n,i){"use strict";var a={Unititialised:0,Intialised:1};a[a.Unititialised]="Unititialised",a[a.Intialised]="Intialised";var c=function(){function t(){this.Recieved=new i.EventEmitter,this.message=new r.Subject,this.state=new r.Subject}return Object.defineProperty(t.prototype,"State",{get:function(){return this.state.asObservable()},enumerable:!0,configurable:!0}),t.prototype.send=function(t){this.connection.invoke("Broadcast",t)["catch"](function(t){return console.error(t.toString())}),this.connection.invoke("Broadcast",101)["catch"](function(t){return console.error(t.toString())})},t.prototype.start=function(){var e=this;this.connection=(new signalR.HubConnectionBuilder).withUrl("/apphub").build(),this.connection.on("Send",function(t){console.log(t),e.Recieved.emit(t)}),this.promise=this.connection.start(),this.promise["catch"](function(t){return console.log(t)}),this.promise.then(function(){return e.state.next(a.Intialised)})},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[]},t.propDecorators={Recieved:[{type:i.Output}]},t}(),u=function(){function t(t){this.http=t,this.StateChanged=new i.EventEmitter}return t.prototype.GetData=function(){return this.http.post("/data",{}).pipe(o.map(function(t){return t.json()}),o.catchError(this.handleError("getData",[])))},t.prototype.handleError=function(e,n){return void 0===e&&(e="operation"),function(t){return console.error(t),console.log(e+" failed: "+t.message),r.of(n)}},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:e.Http}]},t.propDecorators={StateChanged:[{type:i.Output}]},t}(),s=function(){function t(t,e){var n=this;this.http=t,this.router=e,this.isLoggedIn=!1,this.StateChanged=new i.EventEmitter,this.http.get("/auth").pipe(o.map(function(t){return t.json()})).subscribe(function(t){n.isLoggedIn=t,n.StateChanged.emit(n.isLoggedIn)})}return Object.defineProperty(t.prototype,"IsLoggedIn",{get:function(){return this.isLoggedIn},enumerable:!0,configurable:!0}),t.prototype.login=function(t,e){var n=this;this.http.post("/login",JSON.stringify({Username:t,Password:e})).subscribe(function(t){n.isLoggedIn=t.ok,n.StateChanged.emit(n.isLoggedIn),t.ok&&n.router.navigate(["/"])},function(t){n.isLoggedIn=!1,n.StateChanged.emit(n.isLoggedIn)})},t.prototype.logout=function(){var e=this;this.http.get("/logout").pipe(o.map(function(t){t.ok&&e.router.navigate(["/"])}))},t.decorators=[{type:i.Injectable}],t.ctorParameters=function(){return[{type:e.Http},{type:n.Router}]},t.propDecorators={StateChanged:[{type:i.Output}]},t}(),p=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.canActivate=function(t,e){var n=e.url;return this.checkLogin(n)},t.prototype.checkLogin=function(t){return!!this.authService.IsLoggedIn||(this.authService.RedirectUrl=t,this.router.navigate(["/login"]),!1)},t.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:s},{type:n.Router}]},t.ngInjectableDef=i.defineInjectable({factory:function(){return new t(i.inject(s),i.inject(n.Router))},token:t,providedIn:"root"}),t}(),d=function(){function t(){}return t.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=i.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),g=function(){function t(){}return t.prototype.ngOnInit=function(){},t.decorators=[{type:i.Component,args:[{selector:"lib-Core",template:"\n    <p>\n      core works!\n    </p>\n  "}]}],t.ctorParameters=function(){return[]},t}(),f=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{imports:[],declarations:[g],exports:[g]}]}],t}();t.ServiceState=a,t.SignalrClientService=c,t.DataService=u,t.AuthService=s,t.AuthGuard=p,t.CoreService=d,t.CoreComponent=g,t.MyCoreModule=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mycore.umd.min.js.map